package gameInfo{		import gameControl.TheGame;	import gameInfo.SecuritySlider;  	import flash.display.Sprite;	import flash.display.MovieClip;	import flash.display.Stage;	import flash.events.TimerEvent;    import flash.utils.Timer;	import flash.text.TextField;	public class GameInfoG extends Sprite    {		private var m_securitySlider:SecuritySlider;		private var m_gameinfoMC:MovieClip;		private var m_timer:Timer = new Timer(150,0);				private var m_lastMoney:int = 0;		private var m_lastRep:int = 0;				private var m_numPassengers:int = 0;		private var m_numArrests:int = 0;				private var m_messages = new Array();				public function GameInfoG(aStage:Stage,gameInfoMC:MovieClip, securitySliderMC:MovieClip)		{			m_gameinfoMC = gameInfoMC;			addChild(m_gameinfoMC);			onTick(null);									m_securitySlider = new SecuritySlider(aStage, securitySliderMC);			addChild(m_securitySlider);						m_securitySlider.x = 32;			m_securitySlider.y = 19;							m_timer.addEventListener(TimerEvent.TIMER, onTick);			m_timer.start();						m_gameinfoMC.msg1_mc.msg1.text = "";			m_gameinfoMC.msg2_mc.msg2.text = "";			m_gameinfoMC.msg3_mc.msg3.text = "";					}		public function onPassengerEnterSecurityStation()		{			m_numPassengers++;			m_gameinfoMC.passengersTxt.text = m_numPassengers + " passengers";		}				public function onPassengerArrest()		{			m_numArrests++;			m_gameinfoMC.arrestTxt.text = m_numArrests + " arrests";		}				public function addMessage(msg:String)		{			if(m_messages.length == 3)				m_messages.pop();						m_messages.unshift(new Array(msg, MESSAGE_LIFE)); // text & opacity			m_gameinfoMC.msg3_mc.alpha = m_gameinfoMC.msg2_mc.alpha;			m_gameinfoMC.msg2_mc.alpha = m_gameinfoMC.msg1_mc.alpha;			m_gameinfoMC.msg1_mc.alpha = 1;						if(m_messages.length > 0)			{					m_gameinfoMC.msg1_mc.msg1.text = m_messages[0][0];			}						if(m_messages.length > 1)			{				m_gameinfoMC.msg2_mc.msg2.text = m_messages[1][0];			}						if(m_messages.length > 2)			{				m_gameinfoMC.msg3_mc.msg3.text = m_messages[2][0];			}		}				var MESSAGE_LIFE = 50;		var OPACITY_CHANGE = 20;				private function updateMessageLife()		{			for (var i = 0; i < m_messages.length; i++)			{				m_messages[i][1]--;								var aMsgMC:MovieClip;				var aTxt:TextField;								if(m_messages[i][1] <= 0)				{					switch(i)					{						case 0:							aMsgMC = m_gameinfoMC.msg1_mc;							aTxt = aMsgMC.msg1;							break;													case 1:							aMsgMC = m_gameinfoMC.msg2_mc;							aTxt = aMsgMC.msg2;							break;													case 2:							aMsgMC = m_gameinfoMC.msg3_mc;							aTxt = aMsgMC.msg3;							break;						}									aMsgMC.alpha -= OPACITY_CHANGE / 100;										if(aMsgMC.alpha <= 0)					{						m_messages.pop();						aTxt.text = "";						aMsgMC.alpha = 1;					}							}			}		}				public function onTick(event:TimerEvent)		{						if(TheGame.getMoney() != m_lastMoney)			{				m_lastMoney = TheGame.getMoney();				m_gameinfoMC.moneyTxt.text = "$" + m_lastMoney;			}							if(TheGame.getReputation() != m_lastMoney)			{				m_lastRep = TheGame.getReputation();				m_gameinfoMC.reputationTxt.text = m_lastRep + " Rep";			}								updateMessageLife();			}			}	}